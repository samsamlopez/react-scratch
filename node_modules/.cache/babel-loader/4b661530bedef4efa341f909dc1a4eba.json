{"ast":null,"code":"import _objectSpread from \"/home/webdev/Documents/react-portal/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/home/webdev/Documents/react-portal/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/webdev/Documents/react-portal/src/common-components/logs-filter/components/SearchBar.tsx\";\nimport React, { useState, useEffect } from \"react\";\nimport TextField from \"@material-ui/core/TextField\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport GearIcon from \"@material-ui/icons/Settings\";\nimport { Paper, Grid, Collapse, List, ListItem, ListItemText, TableRow, Table, TableBody, Menu } from \"@material-ui/core\";\nimport { ActiveCell } from \"common-components/table-cells\";\nimport { makeStyles, MuiThemeProvider, createMuiTheme } from \"@material-ui/core/styles\";\nimport { Link } from \"react-router-dom\";\n/**\n * ==============================================================================\n * <SearchBar />\n * ------------------------------------------------------------------------------\n * @param {string}        title     Title of the search\n * @param {Array}         userData  user data array\n * @param {Array}         headers   headers to be search for\n * @return {ReactElement}\n * ==============================================================================\n */\n\nconst theme = createMuiTheme({\n  overrides: {\n    MuiTableCell: {\n      root: {\n        borderBottom: \"none\"\n      }\n    }\n  }\n});\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: \"flex\"\n  },\n  inputField: {\n    fontSize: \"1.2rem\",\n    \"&&&&:hover:before\": {\n      borderBottom: \"1px solid rgba(0,0,0,0.1)\"\n    },\n    \"&:before\": {\n      borderBottom: \"1px solid rgba(0,0,0,0.1)\"\n    },\n    \"&:after\": {\n      borderBottom: \"2px solid #1394f6\"\n    }\n  }\n}));\n\nfunction isObject(val) {\n  return typeof val === \"object\";\n}\n\nconst SearchBar = ({\n  typed,\n  title,\n  userData,\n  headers,\n  pathnameData,\n  link,\n  settings,\n  setActiveDataMethod,\n  loading,\n  active,\n  modalFunc\n}) => {\n  const classes = useStyles();\n\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        results = _useState2[0],\n        setResults = _useState2[1];\n\n  const _useState3 = useState(userData),\n        _useState4 = _slicedToArray(_useState3, 2),\n        DummyResults = _useState4[0],\n        setDummyResults = _useState4[1];\n\n  const _React$useState = React.useState(null),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        anchorEl = _React$useState2[0],\n        setAnchorEl = _React$useState2[1];\n\n  const _React$useState3 = React.useState(\"\"),\n        _React$useState4 = _slicedToArray(_React$useState3, 2),\n        textSearch = _React$useState4[0],\n        setTextSearch = _React$useState4[1];\n\n  let filtered = [];\n  let timeout = null;\n\n  const handleClick = (event, data) => {\n    setAnchorEl(event.currentTarget);\n    setActiveDataMethod(data);\n  };\n\n  const handleClose = () => {\n    console.log(\"Handle Close\");\n    setAnchorEl(null);\n  };\n\n  useEffect(() => {\n    if (loading) {\n      setTextSearch(\"\");\n      setResults([]);\n      setAnchorEl(null);\n    }\n  }, [setTextSearch, loading, setResults, setAnchorEl]);\n\n  const handleSearch = e => {\n    setTextSearch(e.target.value);\n    const regex = /[*()?+[\\\\]/gi;\n\n    if (typed) {\n      typed(e.target.value);\n    }\n\n    let event = e.target.value.replace(regex, \"\");\n\n    if (event.length !== 0) {\n      const arr = JSON.stringify(userData, function (key, value) {\n        return value || false;\n      });\n      const campaigns = JSON.parse(arr);\n      let filteredData = [];\n      campaigns.map(data => {\n        headers.filter(head => {\n          if (isObject(data[head])) {\n            let baseKey = data[head][Object.keys(data[head])];\n\n            try {\n              if (baseKey[Object.keys(baseKey)[0]].toLowerCase().includes(event.toLowerCase())) {\n                filteredData.push(_objectSpread({\n                  name: baseKey[Object.keys(baseKey)[0]]\n                }, data));\n              }\n            } catch {}\n          }\n        });\n      });\n      filtered.push([...new Set(filteredData)]); // clearTimeout(timeout);\n      // timeout = setTimeout(() => {\n      //   if (filtered !== null) {\n      //     if (filtered[0].length !== 0) {\n      //       setDummyResults(filtered[0]);\n      //     }\n      //       setDummyResults(filtered[0]);\n      //   } else {\n      //     setResults(null);\n      //   }\n      // }, 300);\n\n      setDummyResults(filtered[0]);\n      setResults(filtered[0]);\n    } else {\n      filtered = null;\n      setResults([]);\n    }\n  }; // #region renderSearchField\n\n\n  const renderSearchField = () => React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    lg: 12,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191\n    },\n    __self: this\n  }, React.createElement(TextField, {\n    disabled: loading !== undefined ? loading : false,\n    onChange: e => handleSearch(e),\n    id: \"standard-full-width\",\n    value: textSearch,\n    placeholder: `Search for ${title}`,\n    fullWidth: true,\n    margin: \"normal\",\n    autoComplete: \"off\",\n    style: {\n      fontSize: 50,\n      padding: \"5px 15px 15px 15px\",\n      width: \"100%\"\n    },\n    InputProps: {\n      endAdornment: React.createElement(InputAdornment, {\n        position: \"end\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, React.createElement(SearchIcon, {\n        style: {\n          color: \"#bbb\"\n        },\n        fontSize: \"small\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      })),\n      classes: {\n        underline: classes.inputField,\n        root: classes.inputField\n      }\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192\n    },\n    __self: this\n  })); // #endregion\n  // #region renderPreSpan\n\n\n  const renderPreSpan = () => {\n    if (results !== null) {\n      let resultsLength = results !== null ? results.length : 0;\n\n      if (resultsLength !== 0) {\n        return null;\n      } else {\n        return React.createElement(Grid, {\n          item: true,\n          xs: 12,\n          lg: 12,\n          style: {\n            paddingLeft: 10,\n            paddingRight: 10,\n            marginTop: -15\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 232\n          },\n          __self: this\n        });\n      }\n    }\n  }; // #endregion\n  // #region renderNoResult\n\n\n  const renderNoResult = () => {\n    return React.createElement(React.Fragment, null, React.createElement(Collapse, {\n      in: textSearch.length > 0 && results.length < 1 ? true : false,\n      timeout: 1000,\n      unmountOnExit: true,\n      style: {\n        width: \"100%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }, \" \", React.createElement(Paper, {\n      style: {\n        width: \"100%\",\n        fontSize: \"18px\",\n        color: \"#7c8a97\",\n        padding: 20,\n        backgroundColor: \"white\",\n        zIndex: 1\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }, \"No results - Try searching for\", \" \", headers === undefined ? \"other fields\" : `${headers}`)));\n  }; // #endregion\n  // #region renderUserResult\n\n\n  const renderUserResult = (result, i) => {\n    return React.createElement(React.Fragment, null, React.createElement(ListItem, {\n      key: i,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      container: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 283\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 284\n      },\n      __self: this\n    }, React.createElement(ListItemText, {\n      primary: title === \"User\" ? `${result.first_name} ${result.last_name}` : `${result.name}`,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 285\n      },\n      __self: this\n    })), React.createElement(Grid, {\n      item: true,\n      style: {\n        marginLeft: \"auto\",\n        paddingRight: 20\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      container: true,\n      spacing: 5,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 294\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295\n      },\n      __self: this\n    }, active !== undefined && active === true && React.createElement(Table, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297\n      },\n      __self: this\n    }, React.createElement(TableBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298\n      },\n      __self: this\n    }, React.createElement(TableRow, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299\n      },\n      __self: this\n    }, React.createElement(ActiveCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300\n      },\n      __self: this\n    }, title === \"User\" ? result.is_active : result.active))))), settings !== undefined && React.createElement(Grid, {\n      item: true,\n      style: {\n        marginTop: 10\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311\n      },\n      __self: this\n    }, React.createElement(GearIcon, {\n      style: {\n        color: \"#777777\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312\n      },\n      __self: this\n    })))))));\n  }; // #endregion\n  // #region renderCustomResult\n\n\n  const renderCustomResult = (result, i) => {\n    return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      key: i,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 330\n      },\n      __self: this\n    }, link !== undefined ? React.createElement(Link, {\n      key: result.uuid,\n      style: {\n        textDecoration: \"none\",\n        color: \"#000\"\n      },\n      to: {\n        pathname: `${pathnameData.firstLink}${pathnameData.fetchData.length > 1 ? pathnameData.fetchData[0] === \"uuid\" ? pathnameData.fetchData[1] === \"slug\" ? result.uuid + \"/\" + result.slug : null : pathnameData.fetchData[0] === \"slug\" ? pathnameData.fetchData[1] === \"uuid\" ? result.slug + \"/\" + result.uuid : null : null : pathnameData.fetchData[0] === \"uuid\" ? result.uuid : pathnameData.fetchData[0] === \"slug\" ? result.slug : null}${pathnameData.lastLink}`,\n        state: {\n          company: result\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332\n      },\n      __self: this\n    }, React.createElement(ListItem, {\n      button: true,\n      onClick: () => {\n        localStorage.setItem(`companyslug`, result.slug);\n        localStorage.setItem(`campaignuuid`, result.uuid);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 361\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      container: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 368\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 369\n      },\n      __self: this\n    }, React.createElement(ListItemText, {\n      primary: title === \"User\" ? `${result.first_name} ${result.last_name}` : `${result.name}`,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 370\n      },\n      __self: this\n    })), React.createElement(Grid, {\n      item: true,\n      style: {\n        marginLeft: \"auto\",\n        paddingRight: 20\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 378\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      container: true,\n      spacing: 5,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 386\n      },\n      __self: this\n    }, active !== undefined && active === true && React.createElement(Table, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 388\n      },\n      __self: this\n    }, React.createElement(TableBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 389\n      },\n      __self: this\n    }, React.createElement(TableRow, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390\n      },\n      __self: this\n    }, React.createElement(ActiveCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 391\n      },\n      __self: this\n    }, title === \"User\" ? result.is_active : result.active))))), settings !== undefined && React.createElement(Grid, {\n      item: true,\n      style: {\n        marginTop: 10\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 402\n      },\n      __self: this\n    }, React.createElement(GearIcon, {\n      style: {\n        color: \"#777777\"\n      },\n      onClick: e => handleClick(e, result),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 403\n      },\n      __self: this\n    }), React.createElement(Menu, Object.assign({}, menuProps, {\n      style: {\n        marginTop: 40\n      },\n      id: \"simple-menu\",\n      anchorEl: anchorEl,\n      open: Boolean(anchorEl),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 407\n      },\n      __self: this\n    }), settings))))))) : React.createElement(React.Fragment, null, React.createElement(ListItem, {\n      button: true,\n      onClick: modalFunc !== undefined ? () => modalFunc(result) : () => null,\n      key: result.uuid,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 425\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      container: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 432\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 433\n      },\n      __self: this\n    }, React.createElement(ListItemText, {\n      primary: title === \"User\" ? `${result.first_name} ${result.last_name}` : `${result.name}`,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 434\n      },\n      __self: this\n    })), React.createElement(Grid, {\n      item: true,\n      style: {\n        marginLeft: \"auto\",\n        paddingRight: 20\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 442\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      container: true,\n      spacing: 5,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 449\n      },\n      __self: this\n    }, React.createElement(Grid, {\n      item: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 450\n      },\n      __self: this\n    }, active !== undefined && active === true && React.createElement(Table, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 452\n      },\n      __self: this\n    }, React.createElement(TableBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 453\n      },\n      __self: this\n    }, React.createElement(TableRow, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 454\n      },\n      __self: this\n    }, React.createElement(ActiveCell, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 455\n      },\n      __self: this\n    }, title === \"User\" ? result.is_active : result.active))))), React.createElement(Grid, {\n      item: true,\n      style: {\n        marginTop: 10\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 466\n      },\n      __self: this\n    }, Object.keys(result.changed_fields).join(\", \")))))))));\n  }; // #endregion\n  // #region renderResult\n\n\n  const renderResult = () => {\n    return React.createElement(React.Fragment, null, React.createElement(Collapse, {\n      in: results !== null && results.length > 0 ? true : false,\n      timeout: 1000,\n      unmountOnExit: true,\n      style: {\n        width: \"100%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 486\n      },\n      __self: this\n    }, React.createElement(List, {\n      component: \"nav\",\n      \"aria-label\": \"search results\",\n      style: {\n        maxHeight: 300,\n        height: 300,\n        overflow: \"auto\",\n        width: \"100%\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 492\n      },\n      __self: this\n    }, results.length === null ? DummyResults.map((result, i) => {\n      renderUserResult(result, i);\n    }) : results.length === 0 ? DummyResults.map((result, i) => {\n      renderUserResult(result, i);\n    }) : results.map((result, i) => {\n      renderCustomResult(result, i);\n    }), React.createElement(Menu, Object.assign({}, menuProps, {\n      style: {\n        marginTop: 40\n      },\n      id: \"simple-menu\",\n      anchorEl: anchorEl,\n      open: Boolean(anchorEl),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 513\n      },\n      __self: this\n    }), settings))));\n  }; // #endregion\n\n\n  const menuProps = {\n    onClose: () => handleClose()\n  };\n  return React.createElement(MuiThemeProvider, {\n    theme: theme,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 535\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: classes.root,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 536\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    container: true,\n    style: {\n      width: \"100%\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 537\n    },\n    __self: this\n  }, renderSearchField(), renderPreSpan(), renderNoResult(), renderResult())));\n};\n\nexport { SearchBar };","map":{"version":3,"sources":["/home/webdev/Documents/react-portal/src/common-components/logs-filter/components/SearchBar.tsx"],"names":["React","useState","useEffect","TextField","InputAdornment","SearchIcon","GearIcon","Paper","Grid","Collapse","List","ListItem","ListItemText","TableRow","Table","TableBody","Menu","ActiveCell","makeStyles","MuiThemeProvider","createMuiTheme","Link","theme","overrides","MuiTableCell","root","borderBottom","useStyles","display","inputField","fontSize","isObject","val","SearchBar","typed","title","userData","headers","pathnameData","link","settings","setActiveDataMethod","loading","active","modalFunc","classes","results","setResults","DummyResults","setDummyResults","anchorEl","setAnchorEl","textSearch","setTextSearch","filtered","timeout","handleClick","event","data","currentTarget","handleClose","console","log","handleSearch","e","target","value","regex","replace","length","arr","JSON","stringify","key","campaigns","parse","filteredData","map","filter","head","baseKey","Object","keys","toLowerCase","includes","push","name","Set","renderSearchField","undefined","padding","width","endAdornment","color","underline","renderPreSpan","resultsLength","paddingLeft","paddingRight","marginTop","renderNoResult","backgroundColor","zIndex","renderUserResult","result","i","first_name","last_name","marginLeft","is_active","renderCustomResult","uuid","textDecoration","pathname","firstLink","fetchData","slug","lastLink","state","company","localStorage","setItem","menuProps","Boolean","changed_fields","join","renderResult","maxHeight","height","overflow","onClose"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport TextField from \"@material-ui/core/TextField\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport GearIcon from \"@material-ui/icons/Settings\";\n\nimport {\n  Paper,\n  Grid,\n  Collapse,\n  List,\n  ListItem,\n  ListItemText,\n  TableRow,\n  Table,\n  TableBody,\n  Menu\n} from \"@material-ui/core\";\nimport { ActiveCell } from \"common-components/table-cells\";\nimport {\n  makeStyles,\n  MuiThemeProvider,\n  createMuiTheme\n} from \"@material-ui/core/styles\";\n\nimport { Link } from \"react-router-dom\";\n\n/**\n * ==============================================================================\n * <SearchBar />\n * ------------------------------------------------------------------------------\n * @param {string}        title     Title of the search\n * @param {Array}         userData  user data array\n * @param {Array}         headers   headers to be search for\n * @return {ReactElement}\n * ==============================================================================\n */\n\nconst theme = createMuiTheme({\n  overrides: {\n    MuiTableCell: {\n      root: {\n        borderBottom: \"none\"\n      }\n    }\n  }\n});\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: \"flex\"\n  },\n  inputField: {\n    fontSize: \"1.2rem\",\n    \"&&&&:hover:before\": {\n      borderBottom: \"1px solid rgba(0,0,0,0.1)\"\n    },\n    \"&:before\": {\n      borderBottom: \"1px solid rgba(0,0,0,0.1)\"\n    },\n    \"&:after\": {\n      borderBottom: \"2px solid #1394f6\"\n    }\n  }\n}));\nfunction isObject(val: string) {\n  return typeof val === \"object\";\n}\n\ninterface Props {\n  typed?: any;\n  title: string;\n  userData: any;\n  headers: any;\n  pathnameData?: any;\n  link?: any;\n  settings?: any;\n  setActiveDataMethod?: any;\n  loading?: any;\n  active?: any;\n  modalFunc?: any;\n}\n\ninterface Result {\n  uuid: string;\n  slug: string;\n  first_name: string;\n  last_name: string;\n  name: string;\n  is_active: any;\n  active: any;\n  changed_fields: any;\n}\n\nconst SearchBar: React.FC<Props> = ({\n  typed,\n  title,\n  userData,\n  headers,\n  pathnameData,\n  link,\n  settings,\n  setActiveDataMethod,\n  loading,\n  active,\n  modalFunc\n}) => {\n  const classes = useStyles();\n  const [results, setResults] = useState([]);\n  const [DummyResults, setDummyResults] = useState(userData);\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const [textSearch, setTextSearch] = React.useState(\"\");\n  let filtered = [] as any;\n  let timeout = null;\n\n  const handleClick: Function = (event: any, data: any) => {\n    setAnchorEl(event.currentTarget);\n    setActiveDataMethod(data);\n  };\n  const handleClose: Function = () => {\n    console.log(\"Handle Close\");\n    setAnchorEl(null);\n  };\n\n  useEffect(() => {\n    if (loading) {\n      setTextSearch(\"\");\n      setResults([]);\n      setAnchorEl(null);\n    }\n  }, [setTextSearch, loading, setResults, setAnchorEl]);\n\n  const handleSearch: Function = (e: any) => {\n    setTextSearch(e.target.value);\n    const regex = /[*()?+[\\\\]/gi;\n    if (typed) {\n      typed(e.target.value);\n    }\n    let event = e.target.value.replace(regex, \"\");\n    if (event.length !== 0) {\n      const arr = JSON.stringify(userData, function(key, value) {\n        return value || false;\n      });\n      const campaigns = JSON.parse(arr);\n      let filteredData = [] as any;\n      campaigns.map((data: any) => {\n        headers.filter((head: any) => {\n          if (isObject(data[head])) {\n            let baseKey = data[head][Object.keys(data[head]) as any];\n\n            try {\n              if (\n                baseKey[Object.keys(baseKey)[0]]\n                  .toLowerCase()\n                  .includes(event.toLowerCase())\n              ) {\n                filteredData.push({\n                  name: baseKey[Object.keys(baseKey)[0]],\n                  ...data\n                });\n              }\n            } catch {}\n          }\n        });\n      });\n      filtered.push([...(new Set(filteredData) as any)]);\n\n      // clearTimeout(timeout);\n      // timeout = setTimeout(() => {\n      //   if (filtered !== null) {\n      //     if (filtered[0].length !== 0) {\n      //       setDummyResults(filtered[0]);\n      //     }\n      //       setDummyResults(filtered[0]);\n      //   } else {\n      //     setResults(null);\n      //   }\n      // }, 300);\n\n      setDummyResults(filtered[0]);\n      setResults(filtered[0]);\n    } else {\n      filtered = null;\n      setResults([]);\n    }\n  };\n\n  // #region renderSearchField\n\n  const renderSearchField: Function = () => (\n    <Grid item xs={12} lg={12}>\n      <TextField\n        disabled={loading !== undefined ? loading : false}\n        onChange={(e) => handleSearch(e)}\n        id=\"standard-full-width\"\n        value={textSearch}\n        placeholder={`Search for ${title}`}\n        fullWidth\n        margin=\"normal\"\n        autoComplete=\"off\"\n        style={{\n          fontSize: 50,\n          padding: \"5px 15px 15px 15px\",\n          width: \"100%\"\n        }}\n        InputProps={{\n          endAdornment: (\n            <InputAdornment position=\"end\">\n              <SearchIcon style={{ color: \"#bbb\" }} fontSize=\"small\" />\n            </InputAdornment>\n          ),\n          classes: {\n            underline: classes.inputField,\n            root: classes.inputField\n          }\n        }}\n      />\n    </Grid>\n  );\n\n  // #endregion\n\n  // #region renderPreSpan\n\n  const renderPreSpan: Function = () => {\n    if (results !== null) {\n      let resultsLength = results !== null ? results.length : 0;\n      if (resultsLength !== 0) {\n        return null;\n      } else {\n        return (\n          <Grid\n            item\n            xs={12}\n            lg={12}\n            style={{ paddingLeft: 10, paddingRight: 10, marginTop: -15 }}\n          ></Grid>\n        );\n      }\n    }\n  };\n\n  // #endregion\n\n  // #region renderNoResult\n\n  const renderNoResult: Function = () => {\n    return (\n      <>\n        <Collapse\n          in={textSearch.length > 0 && results.length < 1 ? true : false}\n          timeout={1000}\n          unmountOnExit\n          style={{ width: \"100%\" }}\n        >\n          {\" \"}\n          <Paper\n            style={{\n              width: \"100%\",\n              fontSize: \"18px\",\n              color: \"#7c8a97\",\n              padding: 20,\n              backgroundColor: \"white\",\n              zIndex: 1\n            }}\n          >\n            No results - Try searching for{\" \"}\n            {headers === undefined ? \"other fields\" : `${headers}`}\n          </Paper>\n        </Collapse>\n      </>\n    );\n  };\n\n  // #endregion\n\n  // #region renderUserResult\n\n  const renderUserResult: Function = (result: any, i: number) => {\n    return (\n      <>\n        <ListItem key={i}>\n          <Grid container>\n            <Grid item>\n              <ListItemText\n                primary={\n                  title === \"User\"\n                    ? `${result.first_name} ${result.last_name}`\n                    : `${result.name}`\n                }\n              />\n            </Grid>\n            <Grid item style={{ marginLeft: \"auto\", paddingRight: 20 }}>\n              <Grid container spacing={5}>\n                <Grid item>\n                  {active !== undefined && active === true && (\n                    <Table>\n                      <TableBody>\n                        <TableRow>\n                          <ActiveCell>\n                            {title === \"User\"\n                              ? result.is_active\n                              : result.active}\n                          </ActiveCell>\n                        </TableRow>\n                      </TableBody>\n                    </Table>\n                  )}\n                </Grid>\n                {settings !== undefined && (\n                  <Grid item style={{ marginTop: 10 }}>\n                    <GearIcon style={{ color: \"#777777\" }} />\n                  </Grid>\n                )}\n              </Grid>\n            </Grid>\n          </Grid>\n        </ListItem>\n      </>\n    );\n  };\n\n  // #endregion\n\n  // #region renderCustomResult\n\n  const renderCustomResult: Function = (result: any, i: number) => {\n    return (\n      <>\n        <div key={i}>\n          {link !== undefined ? (\n            <Link\n              key={result.uuid}\n              style={{\n                textDecoration: \"none\",\n                color: \"#000\"\n              }}\n              to={{\n                pathname: `${pathnameData.firstLink}${\n                  pathnameData.fetchData.length > 1\n                    ? pathnameData.fetchData[0] === \"uuid\"\n                      ? pathnameData.fetchData[1] === \"slug\"\n                        ? result.uuid + \"/\" + result.slug\n                        : null\n                      : pathnameData.fetchData[0] === \"slug\"\n                      ? pathnameData.fetchData[1] === \"uuid\"\n                        ? result.slug + \"/\" + result.uuid\n                        : null\n                      : null\n                    : pathnameData.fetchData[0] === \"uuid\"\n                    ? result.uuid\n                    : pathnameData.fetchData[0] === \"slug\"\n                    ? result.slug\n                    : null\n                }${pathnameData.lastLink}`,\n                state: {\n                  company: result\n                }\n              }}\n            >\n              <ListItem\n                button\n                onClick={() => {\n                  localStorage.setItem(`companyslug`, result.slug);\n                  localStorage.setItem(`campaignuuid`, result.uuid);\n                }}\n              >\n                <Grid container>\n                  <Grid item>\n                    <ListItemText\n                      primary={\n                        title === \"User\"\n                          ? `${result.first_name} ${result.last_name}`\n                          : `${result.name}`\n                      }\n                    />\n                  </Grid>\n                  <Grid\n                    item\n                    style={{\n                      marginLeft: \"auto\",\n                      paddingRight: 20\n                    }}\n                  >\n                    <Grid container spacing={5}>\n                      <Grid item>\n                        {active !== undefined && active === true && (\n                          <Table>\n                            <TableBody>\n                              <TableRow>\n                                <ActiveCell>\n                                  {title === \"User\"\n                                    ? result.is_active\n                                    : result.active}\n                                </ActiveCell>\n                              </TableRow>\n                            </TableBody>\n                          </Table>\n                        )}\n                      </Grid>\n                      {settings !== undefined && (\n                        <Grid item style={{ marginTop: 10 }}>\n                          <GearIcon\n                            style={{ color: \"#777777\" }}\n                            onClick={(e) => handleClick(e, result)}\n                          />\n                          <Menu\n                            {...menuProps}\n                            style={{ marginTop: 40 }}\n                            id=\"simple-menu\"\n                            anchorEl={anchorEl}\n                            open={Boolean(anchorEl)}\n                          >\n                            {settings}\n                          </Menu>\n                        </Grid>\n                      )}\n                    </Grid>\n                  </Grid>\n                </Grid>\n              </ListItem>\n            </Link>\n          ) : (\n            <>\n              <ListItem\n                button\n                onClick={\n                  modalFunc !== undefined ? () => modalFunc(result) : () => null\n                }\n                key={result.uuid}\n              >\n                <Grid container>\n                  <Grid item>\n                    <ListItemText\n                      primary={\n                        title === \"User\"\n                          ? `${result.first_name} ${result.last_name}`\n                          : `${result.name}`\n                      }\n                    />\n                  </Grid>\n                  <Grid\n                    item\n                    style={{\n                      marginLeft: \"auto\",\n                      paddingRight: 20\n                    }}\n                  >\n                    <Grid container spacing={5}>\n                      <Grid item>\n                        {active !== undefined && active === true && (\n                          <Table>\n                            <TableBody>\n                              <TableRow>\n                                <ActiveCell>\n                                  {title === \"User\"\n                                    ? result.is_active\n                                    : result.active}\n                                </ActiveCell>\n                              </TableRow>\n                            </TableBody>\n                          </Table>\n                        )}\n                      </Grid>\n\n                      <Grid item style={{ marginTop: 10 }}>\n                        {Object.keys(result.changed_fields).join(\", \")}\n                      </Grid>\n                    </Grid>\n                  </Grid>\n                </Grid>\n              </ListItem>\n            </>\n          )}\n        </div>\n      </>\n    );\n  };\n\n  // #endregion\n\n  // #region renderResult\n  const renderResult: Function = () => {\n    return (\n      <>\n        <Collapse\n          in={results !== null && results.length > 0 ? true : false}\n          timeout={1000}\n          unmountOnExit\n          style={{ width: \"100%\" }}\n        >\n          <List\n            component=\"nav\"\n            aria-label=\"search results\"\n            style={{\n              maxHeight: 300,\n              height: 300,\n              overflow: \"auto\",\n              width: \"100%\"\n            }}\n          >\n            {results.length === null\n              ? DummyResults.map((result: Result, i: number) => {\n                  renderUserResult(result, i);\n                })\n              : results.length === 0\n              ? DummyResults.map((result: Result, i: number) => {\n                  renderUserResult(result, i);\n                })\n              : results.map((result: Result, i: number) => {\n                  renderCustomResult(result, i);\n                })}\n            <Menu\n              {...menuProps}\n              style={{ marginTop: 40 } as React.CSSProperties}\n              id=\"simple-menu\"\n              anchorEl={anchorEl}\n              open={Boolean(anchorEl)}\n            >\n              {settings}\n            </Menu>\n          </List>\n        </Collapse>\n      </>\n    );\n  };\n\n  // #endregion\n\n  const menuProps = {\n    onClose: () => handleClose()\n  };\n\n  return (\n    <MuiThemeProvider theme={theme}>\n      <div className={classes.root}>\n        <Grid container style={{ width: \"100%\" }}>\n          {renderSearchField()}\n          {renderPreSpan()}\n          {renderNoResult()}\n          {renderResult()}\n        </Grid>\n      </div>\n    </MuiThemeProvider>\n  );\n};\n\nexport { SearchBar };\n"]},"metadata":{},"sourceType":"module"}